# ShowPing 📦

**🏆 SSG I&C 5차수 부트캠프 최우수 프로젝트 선정**

## 1. Project Introduction (프로젝트 소개)

### 🔹 Motivation (개발 동기)

기존 이커머스는 상세 페이지의 정적인 정보만으로는 고가의 전자제품 구매를 결정하기 어렵다는 한계가 있었습니다. 저희는 판매자와 구매자 간의 실시간 소통 부재라는 문제를 해결하고, 오프라인 매장처럼 즉각적인 질의응답과 시연이 가능한 환경을 제공하고자 ShowPing을 기획했습니다. 이를 통해 구매 전환율을 높이고 고객의 신뢰를 확보하는 것을 목표로 합니다.

### 🔹 Core Concept (핵심 컨셉)

ShowPing은 실시간 라이브 커머스 플랫폼으로, 오프라인 쇼핑의 생생한 경험을 온라인으로 옮기고 라이브 스트리밍의 상호작용성을 더한 서비스입니다. 판매자는 실시간으로 상품을 시연하고 시청자와 소통하며, 고객은 궁금한 점을 채팅을 통해 즉시 해결하고 영상 속 상품을 바로 구매할 수 있습니다.

### 🔹 Key Objectives (주요 목표)

- **신뢰도 및 몰입감 향상**: 판매자의 실시간 상품 시연을 통해 제품 정보를 투명하게 전달합니다.

- **상호작용 극대화**: 채팅과 댓글 기반의 즉각적인 피드백으로 고객 만족도를 높입니다.

- **구매 경험 간소화**: 라이브 방송과 구매 기능을 연동하여 탐색부터 결제까지의 과정을 단축합니다.

- **차세대 커머스 생태계 구축**: 온라인 쇼핑의 편리함과 실시간 소통의 장점을 결합하여 새로운 쇼핑 경험을 제공합니다.

---

## 2. Development Period (개발 기간)
- 2025.05 ~ 진행 

---

## 3. Roles (역할)

| 이름 | 역할 |
|------|------|
| [김대철](https://github.com/dckat)  | 프로젝트 형상관리, 라이브 스트리밍 기능, VOD 기능 |
| [김주일](https://github.com/juil1-kim)   | 스케줄러, 채팅 기능, 신고 관리 기능 |
| [김창훈](https://github.com/C-H-Kim) | 팀장, 서버 인프라 구축, 라이브 스트리밍 기능 |
| [박헌우](https://github.com/heonwoo1315)  | 문서화 작업, 회원 기능, 보안 기능 |
| [조민호](https://github.com/0O000)  | ERD 관리, 상품 기능, 장바구니 기능, 결제 기능 |

---

## 4. Tech Stack (기술 스택)

### 🖥 Backend
<p>
  <img src="https://img.shields.io/badge/Java-17-007396?style=for-the-badge&logo=openjdk&logoColor=white">
  <img src="https://img.shields.io/badge/Spring%20Boot-3.x-6DB33F?style=for-the-badge&logo=springboot&logoColor=white">
  <img src="https://img.shields.io/badge/Spring%20Security-6.x-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white">
  <img src="https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white">
  <img src="https://img.shields.io/badge/JPA-Hibernate-59666C?style=for-the-badge&logo=hibernate&logoColor=white">
  <img src="https://img.shields.io/badge/TOTP%202FA-RFC%206238-4285F4?style=for-the-badge" />
  <img src="https://img.shields.io/badge/Spring%20WebFlux-6DB33F?style=for-the-badge&logo=spring&logoColor=white">
</p>

### 💬 Messaging & Streaming
<p>
  <img src="https://img.shields.io/badge/Apache%20Kafka-231F20?style=for-the-badge&logo=apachekafka&logoColor=white">
  <img src="https://img.shields.io/badge/Apache%20Zookeeper-FF6F00?style=for-the-badge&logo=apache&logoColor=white">
  <img src="https://img.shields.io/badge/STOMP-WebSocket-FF5722?style=for-the-badge&logo=socketdotio&logoColor=white">
  <img src="https://img.shields.io/badge/Kurento-Media%20Server-5BA745?style=for-the-badge&logo=webrtc&logoColor=white">
</p>

### 💾 Database
<p>
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
  <img src="https://img.shields.io/badge/MongoDB-47A248?style=for-the-badge&logo=mongodb&logoColor=white">
  <img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white">
</p>

### 💻 Frontend
<p>
  <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
  <img src="https://img.shields.io/badge/css3-1572B6?style=for-the-badge&logo=css3&logoColor=white">
  <img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white">
</p>

### ☁ Infra & DevOps
<p>
  <img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white">
  <img src="https://img.shields.io/badge/Nginx-009639?style=for-the-badge&logo=nginx&logoColor=white">
  <img src="https://img.shields.io/badge/GitHub%20Actions-2088FF?style=for-the-badge&logo=githubactions&logoColor=white">
  <img src="https://img.shields.io/badge/AWS%20RDS-527FFF?style=for-the-badge&logo=amazonaws&logoColor=white">
  <img src="https://img.shields.io/badge/NCP-03C75A?style=for-the-badge&logo=naver&logoColor=white">
</p>

### 🛠 Tools & Collaboration
<p>
  <img src="https://img.shields.io/badge/Swagger-85EA2D?style=for-the-badge&logo=swagger&logoColor=black">
  <img src="https://img.shields.io/badge/JMeter-D22128?style=for-the-badge&logo=apachejmeter&logoColor=white">
  <img src="https://img.shields.io/badge/nGrinder-000000?style=for-the-badge&logo=apache&logoColor=white">
  <img src="https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white">
  <img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white">
  <img src="https://img.shields.io/badge/Trello-0052CC?style=for-the-badge&logo=trello&logoColor=white">
</p>

---

## 5. Project Architecture (프로젝트 아키텍처 구조)

### 5 - 1. Overall System Architecture (전체 아키텍처 구조)
<img width="4052" height="1802" alt="시스템 아키텍처_전체_4팀(채팅 기반 라이브 스트리밍 서비스)" src="https://github.com/user-attachments/assets/699728c5-c1c9-435c-a263-c46b531d1ae1" />

- <strong>Spring Boot 내부 구성</strong>: Spring Security, JWT, STOMP(WebSocket), WebFlux, Batch, Gradle을 사용합니다.
- <strong>Redis</strong>에 Refresh Token을 저장하여 재발급을 안전하게 처리합니다.
- <strong>TOTP 기반 MFA(Multi-Factor Authentication)</strong>를 도입하여 관리자 및 민감 기능 접근 시 2단계 인증을 수행합니다.
- <strong>Kafka + ZooKeeper</strong>로 채팅 및 메시징을 분산 처리합니다.
- <strong>MongoDB</strong>에 채팅 로그 및 금칙어를 저장합니다.
- <strong>외부 연동 서비스</strong>: AWS RDS(MySQL), NCP Clova·Object Storage, Google Authenticator(TOTP 2FA), PortOne(결제 모듈)과 연동합니다.
- <strong>CI/CD</strong>는 GitHub Actions로 자동화합니다.
- 협업/성능 테스트 도구로 Slack, Figma, Trello, JMeter, nGrinder 등을 사용합니다. 

---

### 5 - 2. Live Service Architecture (라이브 서비스 아키텍처 구조)
<img width="547" height="406" alt="시스템 아키텍처_라이브_4팀(채팅 기반 라이브 커머스 서비스)" src="https://github.com/user-attachments/assets/5ad938ed-9e31-478c-a681-b963e832bce3" />

- <strong>Ubuntu Private 서버</strong> 위에서 Docker Compose로 전체 서비스를 운영합니다.
- <strong>Nginx</strong>는 HTTPS Termination과 Reverse Proxy 역할을 수행합니다.
- <strong>Spring Boot (Tomcat)</strong>이 핵심 비즈니스 로직(WebFlux, Batch 등)을 처리합니다.
- <strong>Kurento Media Server</strong>가 WebRTC 기반 실시간 스트리밍을 담당합니다.
- <strong>AWS RDS (MySQL)</strong>을 관계형 데이터 저장소로 사용합니다.
- <strong>NCP(Naver Cloud Platform) Object Storage</strong>에 방송 영상을 저장합니다.

---

### 5 - 3. Chat & Messaging Flow (채팅 및 메시징 구조)
<img width="670" height="479" alt="시스템 아키텍처_채팅_4팀(채팅 기반 라이브 커머스 서비스)" src="https://github.com/user-attachments/assets/2c7fde15-2b73-49d3-82ca-6993482d7df6" />

- <strong>Client → Nginx → Spring (JWT 기반 인증)</strong>의 흐름으로 요청을 처리합니다.
- <strong>STOMP/WebSocket</strong>으로 클라이언트와 서버 간 실시간 통신을 제공합니다.
- <strong>Kafka + ZooKeeper</strong>로 메시지를 Producer/Consumer 구조로 처리합니다.
- <strong>MongoDB</strong>에 금칙어와 채팅 로그를 저장합니다.
- <strong>MySQL</strong>에서 회원/상품/권한을 관리합니다.
- <strong>JWT + Spring Security</strong>로 사용자 인증/인가를 수행합니다.

---

### 5 - 4. CI/CD Pipeline (배포 파이프라인)
<img width="508" height="194" alt="시스템_아키텍처_CICD_4팀(채팅 기반 라이브 커머스 서비스)" src="https://github.com/user-attachments/assets/f8114518-bc8a-452e-a6ed-7ff3e329d73c" />

- 개발자가 <strong>GitHub</strong>에 코드를 푸시하면 <strong>GitHub Actions</strong>가 CI/CD 워크플로를 실행합니다.
- 빌드된 <code>.war</code> 파일을 <strong>SCP</strong>로 Ubuntu 서버의 Tomcat 컨테이너에 전달합니다.
- 컨테이너 내부에서 서비스가 자동으로 구동되도록 구성합니다.

---

## 6. ERD & Database Design (ERD 및 데이터베이스 설계)


<img width="1025" height="513" alt="image" src="https://github.com/user-attachments/assets/22dd8526-785e-4ed8-b36c-32cf5a9d2187" />


프로젝트의 데이터베이스는 주요 도메인을 기준으로 논리적으로 분리하여 설계되었습니다. 각 색상 영역은 독립적인 기능을 담당하는 도메인을 나타내며, 대용량의 비정형 데이터는 NoSQL을 활용하여 효율적으로 관리합니다.

🟣 **주문/결제 도메인 (Orders & Payments)**
- **주요 테이블**: `주문(orders)`, `주문내역(order_detail)`, `결제(payment)`, `리뷰(review)`

- **설명**: 사용자의 상품 주문부터 결제 처리, 그리고 구매 후 리뷰 작성까지의 전체 과정을 관리합니다.

🟣 **상품 도메인 (Products)**
- **주요 테이블**: `상품(product)`, `카테고리(category)`

- **설명**: 라이브 커머스에서 판매될 상품의 정보와 카테고리 분류를 담당합니다.

⚫ **회원 도메인 (Members)**
- **주요 테이블**: `회원(member)`

- **설명**: 서비스의 핵심 주체인 회원의 기본 정보, 계정 상태를 관리합니다.

⚫ **보안 도메인 (Security)**
- **주요 테이블**: `관리자단말(admin_device)`, `회원MFA(member_mfa)`

- **설명**: 보안이 요구되는 기능(예: 라이브 등록, 신고 처리 등) 접근 시 단말 인증과 MFA가 함께 적용됩니다.

🟢 **라이브/VOD 도메인 (Live & VOD)**
- **주요 테이블**: `영상(stream)`, `시청(watch)`

- **설명**: 실시간 라이브 방송 및 VOD 영상 정보, 사용자의 시청 기록을 관리합니다.

🔵 **채팅 및 신고 도메인 (Chat & Reporting)**
- **주요 테이블**: `채팅방(chatroom)`, `채팅(chat)`, `신고(report)`, `블랙리스트(blacklist)`

- **설명**: 라이브 방송 중 사용자의 상호작용을 위한 채팅방 정보와 서비스 내 불량 사용자를 관리하기 위한 신고 기능을 담당합니다.

💬 **기타 테이블 및 NoSQL(MongoDB) 활용**
- 이 외에, 실시간으로 대량 발생하는 **채팅(chat) 메시지**와 **금칙어(bad_word) 데이터**는 RDBMS가 아닌 **MongoDB를 사용**하여 별도로 관리합니다. 이는 비정형 채팅 데이터를 효율적으로 처리하고 실시간 필터링을 유연하게 적용하기 위함입니다.

---

## 7. Git Convention & Collaboration (깃 컨벤션 & 협업)

### 🔹 Git Branch Naming Rules (브랜치 네이밍 규칙)
- **Issue 기반 브랜치 생성**: 새로운 기능 추가나 버그 수정을 시작할 때 먼저 GitHub Issue를 작성하고, 해당 이슈 번호를 브랜치명에 반영
  - 예시: `fix/csrf/70` → CSRF 버그 수정 (이슈 번호: #70)
- 브랜치 네이밍 규칙:
  - `feat/기능명/이슈번호` → 새로운 기능 개발
  - `fix/버그명/이슈번호` → 버그 수정
  - `refactor/모듈명/이슈번호` → 리팩토링 작업

### 🔹 Pull Request & Code Review (풀 리퀘스트 & 코드 리뷰)
- 기능 구현 후 **Pull Request(PR)** 생성
- 팀원들이 PR 코드를 검토하며:
  - 코드 블록을 **드래그하여 코멘트** 작성
  - 의문점/개선점을 질의응답 형식으로 공유
- **최소 2명 이상의 승인**을 받아야 Merge 가능
- Merge는 **PR 작성자가 직접 수행**

### 🔹 Knowledge Sharing (지식 공유)
- 개발 중 **도메인 지식, 트러블슈팅 경험** 등을 발견하면 GitHub Issue로 정리 및 공유
- 이슈는 단순 Task 관리뿐만 아니라 **지식 공유 플랫폼** 역할도 수행

---

### 🤝 Collaboration Process (협업 프로세스)

### 📌 During Bootcamp (Original Project)
- **기간**: 2개월
- **Daily Report (GitHub Issue 활용)**  
  - 오늘 할 일(To-do)  
  - 주요 이슈 공유  
  - 도메인 지식 키워드 정리  
  - Future Task (내일 할 일) 체크리스트
- **Daily Meeting**  
  - 아침마다 전날 작업 공유 + 개발 중 발생한 이슈 공유
- **Domain Ownership**  
  - 예: JWT 기반 로그인/인증/인가 도메인 담당 → 러닝커브 극복
- **Documentation**  
  - WBS, Notion, Swagger 등으로 명세 및 진행사항 관리
- **Communication**  
  - 필요 시 Discord 비공개 회의 진행
- **성과**  
  - 해당 프로젝트로 **최우수상 수상**

### 📌 After Bootcamp (Refactoring Project)
- **리포지토리 분리** 후 리팩토링 진행
- 새로운 기능 추가 및 버그 수정
- 파일 구조를 **DDD 기반**으로 재구성
- GitHub Issue & PR을 중심으로 협업 강화

---

## 8. Key Features (주요 기능)

- **Authentication & Authorization (인증/인가)**
  - JWT 기반 로그인/회원가입 (Access + Refresh Token, Redis 저장)
  - TOTP 기반 2단계 인증 (Google Authenticator 연동)
  - CSRF 토큰 기반 보안 구조 적용

- **Live Streaming (라이브 방송)**
  - WebRTC & Kurento 기반 실시간 방송 송출
  - 방송 중 실시간 채팅 및 상품 연동

- **Chat System (채팅 시스템)**
  - STOMP(WebSocket) 기반 양방향 메시징
  - Kafka 분산 처리로 안정성 및 확장성 확보
  - MongoDB 저장 및 금칙어 필터링

- **VOD Service (다시보기 서비스)**
  - 방송 종료 후 영상 NCP Object Storage에 저장
  - HLS 인코딩 및 썸네일 생성
  - VOD 다시보기 제공

- **Watch History (시청 내역)**
  - Cursor 기반 페이지네이션 → 대용량 데이터에서도 빠른 조회
  - 기간 필터 (7일, 1개월, 3개월, 6개월, 사용자 지정 범위)
  - 추천 서비스 확장 가능성

- **Cart & Payment (장바구니 및 결제)**
  - 장바구니 CRUD (추가/삭제/수량 변경)
  - PortOne 결제 모듈 연동
  - CSRF 보안 적용된 REST API

- **Admin & API Docs (관리자 및 문서화)**
  - 관리자 방송 관리 기능 (등록/삭제)
  - Swagger 기반 API 문서 자동 제공

---

## 9. Service Screenshots (서비스 화면 캡처)

### 🔹 Main Page (메인 페이지)

- 사용자가 접속했을 때 처음 보게 되는 메인 화면입니다.
  
<p align="center">
  <img width="1918" height="850" alt="image" src="https://github.com/user-attachments/assets/33a0920e-0665-4f0f-bdb7-b25b1d7e6fcc" />
</p>

### 🔹 Login & Signup (로그인 & 회원가입)

- 사용자 인증을 위한 로그인 및 회원가입 페이지입니다.

- 로그인 페이지
<p align="center">
  <img width="1658" height="843" alt="image" src="https://github.com/user-attachments/assets/b185e0c6-a4ed-438a-9914-f643226790dc" />
</p>

- 회원가입 페이지
<p align="center">
  <img width="1660" height="868" alt="image" src="https://github.com/user-attachments/assets/cdc0ce2f-680b-4b3a-9648-4c52745bac01" />
</p>

### 🔹 MFA & Enroll (MFA & 기기 등록)

- 2차 인증을 위해 기기를 최초 1회 등록하는 페이지입니다. 등록 화면에서 받은 키값으로 Google Authenticator에 계정을 등록 할 수 있습니다.
- 등록한 계정으로 시간 기반 TOTP(6자리 숫자)를 통해 2차인증을 통과 할 수 있습니다. 

- 기기 등록 페이지
<p align="center">
  <img width="573" height="402" alt="image" src="https://github.com/user-attachments/assets/88e459f3-670c-4c83-9da8-cbf35264a0a2" />
</p>

- 2차 인증 페이지
<p align="center">
  <img width="566" height="370" alt="image" src="https://github.com/user-attachments/assets/d92e50a7-e663-4675-9dcb-beb935b5fba9" />
</p>

### 🔹 Live Streaming (라이브 방송)

- 실시간 방송 화면과 채팅창을 함께 볼 수 있는 화면입니다.
- 관리자/유저 화면을 구분하여 제공합니다.

- 관리자 페이지
<p align="center">
  <img width="950" height="498" alt="image" src="https://github.com/user-attachments/assets/72c5748e-74cc-408f-9665-108fb48c0bdb" />
</p>

- 유저 페이지
<p align="center">
  <img width="957" height="431" alt="image" src="https://github.com/user-attachments/assets/65773446-a515-4fc6-b67f-13bcf93f2889" />
</p>

### 🔹 Watch History (시청 내역)

- 방송 종료 후 다시보기 목록 및 상세를 제공합니다.
<p align="center">
  <img width="1398" height="706" alt="image" src="https://github.com/user-attachments/assets/f18e60ba-42eb-4120-b8f0-1477aaf09d41" />

  <img width="958" height="465" alt="image" src="https://github.com/user-attachments/assets/0f25ef67-36dd-49bd-9171-a7d1eef59505" />
</p>

### 🔹 Cart & Payment (장바구니 및 결제)

- 장바구니와 결제를 단계별로 진행할 수 있습니다.
<p align="center">
  <img width="958" height="456" alt="image" src="https://github.com/user-attachments/assets/5b48ea0c-7ea0-4a9c-bc20-6d8ddb73fd1f" />
  <img width="958" height="464" alt="image" src="https://github.com/user-attachments/assets/f7535f26-0a3b-4476-9ce7-cc32e9af3bad" />
  <img width="957" height="463" alt="image" src="https://github.com/user-attachments/assets/be4db94b-fcd7-4c6f-bcf6-aa26fcdd755d" />
  <img width="321" height="320" alt="image" src="https://github.com/user-attachments/assets/3151faa3-9182-4882-b2d9-c561c1ed297e" />
  <img width="325" height="323" alt="image" src="https://github.com/user-attachments/assets/8f55b437-f26d-449d-bba9-038e6bf30cd2" />
</p>

### 🔹 Admin Dashboard (관리자 페이지)

- 관리자가 방송을 등록/삭제하고 운영 기능을 사용할 수 있습니다.
<p align="center">
  <img width="958" height="468" alt="image" src="https://github.com/user-attachments/assets/fc66d2ad-8a29-4577-93f5-f7d87452dfe0" />
</p>

### 🔹 Report Management (신고 관리 페이지)

- 사용자 신고 내역을 조회·처리할 수 있는 관리자 화면입니다.
<p align="center">
  <img width="956" height="448" alt="image" src="https://github.com/user-attachments/assets/45919db3-0d3d-4bdc-9531-d415141804e2" />
  <img width="955" height="449" alt="image" src="https://github.com/user-attachments/assets/7b3672f0-169d-4d01-98a1-f77a6a421397" />
  <img width="958" height="419" alt="image" src="https://github.com/user-attachments/assets/e38b8218-aca8-4813-a503-ffc81eae208f" />
</p>

--- 

## 10. Demo Video (시연 영상)
[전체 시연](https://drive.google.com/file/d/1Ks4gLVGLtBj8AzyBiuPCooFrwcmNZn0Y/view?usp=drive_link)
