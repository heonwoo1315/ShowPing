<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout.html">
<div layout:fragment="content">
    <link rel="stylesheet" th:href="@{/css/watch/stream.css}">
    <link rel="stylesheet" th:href="@{/css/stream/product_modal.css}">
    <link rel="stylesheet" th:href="@{/webjars/ekko-lightbox/5.2.0/dist/ekko-lightbox.css}">
    <link rel="shortcut icon" th:href="@{/img/kurento.png}" type="image/png"/>
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css}">
    
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script th:src="@{/webjars/jquery/3.7.1/dist/jquery.js}"></script>
    <script th:src="@{/webjars/ekko-lightbox/5.2.0/dist/ekko-lightbox.min.js}"></script>
    <script th:src="@{/webjars/webrtc-adapter/7.4.0/release/adapter.js}"></script>
    
    <script th:src="@{https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js}"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js}"></script>
    
    <script type="text/javascript" th:inline="javascript">
        let streamInfo = false;
        let chatRoomInfo = [[${chatRoomInfo}]];
        let chatStreamNo = (typeof chatRoomInfo !== "undefined" && chatRoomInfo !== null) ? chatRoomInfo.streamNo : null;
        let streamNo;
        let chatRoomNo;
    </script>
    
    <script th:src="@{/js/stream/get_stream_info.js}"></script>
    <script th:src="@{/js/stream/register_stream.js}"></script>
    <script th:src="@{/js/stream/product_modal.js}"></script>
    <script th:src="@{/js/kurento-utils.js}"></script>
    <script th:src="@{/js/stream/stream.js}"></script>
    
    <div class="main-contents">
        <div class="content-container">
            <div class="live-container">
                <div class="video">
                    <video id="live-video" autoplay playsinline>
                    </video>
                </div>
            </div>
            <div class="chat-container">
                <!-- Í≥µÏßÄ ÏòÅÏó≠ -->
                <div class="announcement">
                    Í≥µÏßÄ | Live Î∞©ÏÜ° Ï§ëÏóêÎßå Ï¥àÌäπÍ∞Ä
                    <strong> ÏÑ∏Ïùº!!</strong>
                </div>
                
                <div class="chat-messages" id="chat-messages">
                    <!-- Ï¥àÍ∏∞ Î©îÏãúÏßÄ Ï∂îÍ∞Ä Í∞ÄÎä• -->
                </div>
                
                <!-- ÏµúÏã† Ï±ÑÌåÖÏúºÎ°ú Ïù¥Îèô Î≤ÑÌäº -->
                <button id="scroll-to-latest" class="scroll-button" style="display:none;">
                    ‚Üì ÏµúÏã† Ï±ÑÌåÖÏúºÎ°ú Ïù¥Îèô
                </button>
                
                <!-- Ïù∏ÎùºÏù∏ ÏóêÎü¨ Î©îÏãúÏßÄ ÏòÅÏó≠ -->
                <div id="inline-error" style="display: none; color: red; margin: 10px 0;"></div>
                
                <!-- Î©îÏãúÏßÄ ÏûÖÎ†• ÏòÅÏó≠ -->
                <div class="input-container">
                    <input type="text" id="message-input" placeholder="Î©îÏãúÏßÄ ÏûÖÎ†•" maxlength="200">
                    <span id="char-count">0/200 </span>
                    <button id="send-button">‚û§</button>
                </div>
            </div>
            <div class="product-container">
                <div id="product">
                    <div class="product-form">
                        <!-- Î∞©ÏÜ° Ï†úÎ™© -->
                        <div class="form-group horizontal">
                            <label for="broadcastTitle">Î∞©ÏÜ° Ï†úÎ™©</label>
                            <input type="text" id="broadcastTitle" placeholder="Î∞©ÏÜ° Ï†úÎ™©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî" value=""/>
                        </div>
                        
                        <!-- Î∞©ÏÜ° ÏÑ§Î™Ö -->
                        <div class="form-group horizontal">
                            <label for="broadcastDesc">Î∞©ÏÜ° ÏÑ§Î™Ö</label>
                            <textarea id="broadcastDesc" placeholder="Î∞©ÏÜ° ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî" value=""></textarea>
                        </div>
                        
                        <!-- ÏÉÅÌíà ÏÑ†ÌÉù -->
                        <div class="form-group horizontal select-group">
                            <label>ÏÉÅÌíà ÏÑ†ÌÉù</label>
                            <button type="button" class="select-btn">+ ÏÑ†ÌÉù</button>
                        </div>
                        
                        <!-- ÏÉÅÌíà Í≤ÄÏÉâ Î™®Îã¨(ÌåùÏóÖ) -->
                        <div id="productModal" class="modal">
                            <div class="modal-content">
                                <!-- Îã´Í∏∞(X) Î≤ÑÌäº -->
                                <span class="close">&times;</span>
                                
                                <!-- Î™®Îã¨ Ï†úÎ™© -->
                                <h2 class="modal-title">ÏÉÅÌíà ÏÑ†ÌÉù</h2>
                                
                                <!--                                &lt;!&ndash; Í≤ÄÏÉâ ÏòÅÏó≠ &ndash;&gt;-->
                                <!--                                <div class="search-bar">-->
                                <!--                                    <input type="text" placeholder="ÏÉÅÌíàÏùÑ Í≤ÄÏÉâÌïòÏÑ∏Ïöî"/>-->
                                <!--                                    <button class="search-btn">-->
                                <!--                                        &lt;!&ndash; Í∞ÑÎã®Ìïú ÏïÑÏù¥ÏΩò(Ïù¥Î™®ÏßÄÎÇò FontAwesome Îì± ÏÇ¨Ïö© Í∞ÄÎä•) &ndash;&gt;-->
                                <!--                                        <span style="font-size:16px;">üîç</span>-->
                                <!--                                    </button>-->
                                <!--                                </div>-->
                                
                                <!-- ÏÉÅÌíà Î™©Î°ù (Ïä§ÌÅ¨Î°§) -->
                                <div class="product-list-container">
                                    <ul class="product-list">
                                    
                                    </ul>
                                    <div id="loading" style="display: none; text-align: center; padding: 10px;">Loading...</div>
                                    <div id="end-msg" style="display: none; text-align: center; padding: 10px;">ÎßàÏßÄÎßâ ÏÉÅÌíàÏûÖÎãàÎã§.</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ÏÑ†ÌÉùÎêú ÏÉÅÌíà -->
                        <div class="product-element">
                            <img src="" alt="ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ" class="product-img">
                            <div class="product-info">
                                <p class="product-name"></p>
                                <div class="product-price-container">
                                    <p class="product-origin-price"></p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ìï†Ïù∏Ïú® -->
                        <div class="form-group horizontal discount-group">
                            <label for="discountRate">Ìï† Ïù∏ Ïú®</label>
                            <div class="discount-input">
                                <input type="number" id="discountRate" placeholder="0" min="0" max="100"/>
                                <span>%</span>
                            </div>
                        </div>
                        
                        <!-- ÏóÖÎç∞Ïù¥Ìä∏ Î≤ÑÌäº -->
                        <div class="form-group horizontal update-group">
                            <button class="update-btn">ÏóÖÎç∞Ïù¥Ìä∏</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Î™®Îã¨ Ïò§Î≤ÑÎ†àÏù¥ (Î∞∞Í≤Ω ÌùêÎ¶º Ìö®Í≥ºÏö©) -->
        <div class="modal-overlay" id="modalOverlay"></div>
        
        <div class="report-modal" id="reportModal">
            <h2>Ï±ÑÌåÖ Ïã†Í≥†</h2>
            <p class="description">Ïã†Í≥† ÏÇ¨Ïú†Î•º ÏÑ†ÌÉùÌï¥ Ï£ºÏÑ∏Ïöî.</p>
            <form id="reportForm">
                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="reportReason" value="ÏùåÎûÄÏÑ±, Ìè≠Î†•ÏÑ± ÎòêÎäî Í¥¥Î°≠Ìûò" required/>
                        ÏùåÎûÄÏÑ±, Ìè≠Î†•ÏÑ± ÎòêÎäî Í¥¥Î°≠Ìûò
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="reportReason" value="ÎπÑÎ∞© Î∞è Î™ÖÏòàÌõºÏÜê"/>
                        ÎπÑÎ∞© Î∞è Î™ÖÏòàÌõºÏÜê
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="reportReason" value="Ïä§Ìå∏ Î∞è ÎèÑÎ∞∞ ÌñâÏúÑ"/>
                        Ïä§Ìå∏ Î∞è ÎèÑÎ∞∞ ÌñâÏúÑ
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="reportReason" value="Í¥ëÍ≥†ÏÑ± ÎòêÎäî Î∂ÄÏ†ÅÏ†àÌïú Î∞úÏñ∏"/>
                        Í¥ëÍ≥†ÏÑ± ÎòêÎäî Î∂ÄÏ†ÅÏ†àÌïú Î∞úÏñ∏
                    </label>
                </div>
                <div class="report-content">
                    <!-- Ïã†Í≥† ÎåÄÏÉÅ Ï†ïÎ≥¥Í∞Ä ÎèôÏ†ÅÏúºÎ°ú Îì§Ïñ¥Í∞à Î∂ÄÎ∂Ñ -->
                    <p class="chatContent" id="reportTargetText">Ïã†Í≥† ÎåÄÏÉÅÏùò Ï±ÑÌåÖ ÎÇ¥Ïö©</p>
                </div>
                <div class="button-group">
                    <button type="button" id="cancelBtn">Ï∑®ÏÜå</button>
                    <button type="submit" id="submitBtn">Ïã†Í≥†ÌïòÍ∏∞</button>
                </div>
            </form>
        </div>
    </div>
    
    <br>
    <div class="settings-buttons">
        <div class="buttons-container">
            <button id="start" onclick="startLive()" class="btn btn-success">
                <span class="glyphicon glyphicon-play"></span>ÏÜ°Ï∂úÏãúÏûë
            </button>
            <button id="stop" onclick="stopLive()" class="btn btn-danger">
                <span class="glyphicon glyphicon-stop"></span>ÏÜ°Ï∂úÏ¢ÖÎ£å
            </button>
        </div>
    </div>
    <br>
</div>
</html>